name: React CI

# Eventi che fanno partire automaticamente la GitHub Action
on:
  # Si attiva ad ogni push sul branch principale
  push:
    branches:
      - main

  # Si attiva quando viene aperta o aggiornata una Pull Request verso main
  pull_request:
    branches:
      - main

# Definizione dei lavori da eseguire
jobs:
  build-and-lint: # Nome del job
    
    # Ho scelto una macchina virtuale con Ubuntu come sistema operativo
    runs-on: ubuntu-latest

    steps:
      
      # Scarica il codice del repository dentro la macchina virtuale
      - name: Checkout repository
        uses: actions/checkout@v4

      # Setup pnpm per gestire le dipendenze
      - name: Setup pnpm
        uses: pnpm/action-setup@v4
        with:
          version: latest

      # Node.js versione 24 nell'ambiente
      - name: Setup Node.js 24
        uses: actions/setup-node@v4
        with:
          node-version: 24      # Versione di Node da usare

      # Installa tutte le dipendenze del progetto in modo pulito
      - name: Install dependencies
        run: pnpm install      # Usa pnpm per installare le dipendenze

      # Esegue la build di produzione dell'app React
      - name: Build React app
        run: pnpm run build    # Esegue lo script build definito in package.json

      # Controlla la qualit√† del codice con il linter
      - name: Run linter
        run: pnpm run lint     # Esegue lo script lint definito in package.json
